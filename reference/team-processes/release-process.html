<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-reference/team-processes/release-process">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Release Owner Duties | Firefox Ecosystem Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mozilla.github.io/ecosystem-platform/reference/team-processes/release-process"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Release Owner Duties | Firefox Ecosystem Platform"><meta data-rh="true" name="description" content="What is a Release Owner?"><meta data-rh="true" property="og:description" content="What is a Release Owner?"><link data-rh="true" rel="icon" href="/ecosystem-platform/img/firefox-logo.png"><link data-rh="true" rel="canonical" href="https://mozilla.github.io/ecosystem-platform/reference/team-processes/release-process"><link data-rh="true" rel="alternate" href="https://mozilla.github.io/ecosystem-platform/reference/team-processes/release-process" hreflang="en"><link data-rh="true" rel="alternate" href="https://mozilla.github.io/ecosystem-platform/reference/team-processes/release-process" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RFM5H13DFK-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Firefox Ecosystem Platform" href="/ecosystem-platform/opensearch.xml"><link rel="stylesheet" href="/ecosystem-platform/assets/css/styles.7b562038.css">
<link rel="preload" href="/ecosystem-platform/assets/js/runtime~main.bdf135bd.js" as="script">
<link rel="preload" href="/ecosystem-platform/assets/js/main.db86fd1f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ecosystem-platform/"><div class="navbar__logo"><img src="/ecosystem-platform/img/firefox-logo.png" alt="Ecosystem Platform Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/ecosystem-platform/img/firefox-logo.png" alt="Ecosystem Platform Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Firefox Ecosystem Platform</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mozilla/ecosystem-platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ecosystem-platform/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">For Relying Parties</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/tutorials/integration-with-fxa">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/how-twos/end-to-end-encryption">How-to Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/reference/metrics-for-relying-parties">Reference</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">For FxA Engineers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/tutorials/development-setup">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/how-tos/creating-an-account-locally">How-to Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/ecosystem-platform/reference/team-processes/development-process">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/ecosystem-platform/reference/team-processes/development-process">Team Processes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/team-processes/development-process">Planning and Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/team-processes/work-breakdown-process">Work Breakdown</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/team-processes/triage-process">Triage Owner Duties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ecosystem-platform/reference/team-processes/release-process">Release Owner Duties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/team-processes/pull-request-review-guidelines">Pull Request review guidelines</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/style-guides/general-best-practices">Style Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/tests-in-circleci">CI and Test Automation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/customs-api">⚙️ Customs API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/database-structure">Database Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/browser-support">Browser Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/incident-response">Incident Response</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/emails">Emails</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/localization">Localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/token-types">Types of Auth Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/jwt-access-tokens">JWT Access Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/storybook-deploys-with-circleci">Storybook Deploys with CircleCI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/webchannels-in-firefox-desktop-fennec">WebChannels in Firefox Desktop &amp; Fennec</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/webchannels-in-fenix-webextensions">WebChannels in Fenix &amp; WebExtensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/internal-api-documentation">Internal API Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/experiments-ab-testing">Experiments &amp; A/B Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/system-diagrams">System Diagrams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/application-logging">Application Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/application-tracing">Application Tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/scheduled-maintenance">Scheduled Maintenance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/mobile-specifics">Mobile Specifics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/architectural-decision-records">Architectural Decision Records</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/github-strategies">GitHub Strategies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/third-party-authentication">Third Party Authentication in FxA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/rate-limiting">Rate limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/using-swagger-for-api-documentation">Using Swagger for API documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a href="https://docs.telemetry.mozilla.org/datasets/fxa.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Telemetry Data Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/explanation/metrics">Explanation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/additional-docs">Additional Docs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">For Support Agents</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/admin-panel">Reference</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ecosystem-platform/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">For FxA Engineers</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Team Processes</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Release Owner Duties</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Release Owner Duties</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-release-owner">What is a Release Owner?<a href="#what-is-a-release-owner" class="hash-link" aria-label="Direct link to What is a Release Owner?" title="Direct link to What is a Release Owner?">​</a></h2><p>The main duty of the release owner is to be the designated engineer to follow the &quot;Releasing Code&quot; process described below. The release owner should communicate and work with the rest of the team to ensure a smooth close-out of the current sprint, as well as create patch (AKA dot) releases as necessary throughout the sprint.</p><p>At the time of writing, the release responsibility is rotated every sprint/train to the next team member on the list at the top of our <a href="https://docs.google.com/document/d/1lc5T1ZvQZlhXY6j1l_VMeQT9rs1mN7yYIcHbRPR2IbQ/edit" target="_blank" rel="noopener noreferrer">deployment doc</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="i-am-the-release-owner-how-should-i-plan-my-sprint">I am the Release Owner: How should I plan my Sprint?<a href="#i-am-the-release-owner-how-should-i-plan-my-sprint" class="hash-link" aria-label="Direct link to I am the Release Owner: How should I plan my Sprint?" title="Direct link to I am the Release Owner: How should I plan my Sprint?">​</a></h2><p>Release ownership is confirmed during the sprint kick-off team meeting. Release owners should update the top of the <a href="https://docs.google.com/document/d/1lc5T1ZvQZlhXY6j1l_VMeQT9rs1mN7yYIcHbRPR2IbQ/edit" target="_blank" rel="noopener noreferrer">deploy doc</a> with the train number they will be tagging and their name (don&#x27;t forget to choose an emoji 🤘).</p><p>If you are the designated release owner, consider the following suggestions to managing your work and the release:</p><ul><li>When taking on work for the sprint, consider taking on around 5-15% less in order to allocate a portion of each day to release management duties and in particular towards the end of the sprint - this helps give you padding in case an unexpected (or two, or three) dot release comes up.</li><li>Take some time a day or two before tagging is scheduled to reach out in the #fxa-team Slack channel or to individual team members to check-in on in-progress or to-do work items. This might result in you taking on additional work performing reviews or reaching out to the appropriate people.<ul><li>Things to consider asking:<ul><li>Are there any tasks that need to be in the train? Are any of them in jeopardy of holding up the release from being tagged?</li><li>Is there anything I can do to help keep things moving?</li></ul></li></ul></li><li>1-3 hours before tagging, check open PRs and let the team know you will be tagging at X time and ask that any missing notes in the deploy doc be added. Atypically, a critical patch may be very close to landing which may delay the tag by a few hours.</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you&#x27;re new to release ownership, check that you have access to the <a href="https://github.com/mozilla/fxa-private" target="_blank" rel="noopener noreferrer"><code>fxa-private</code></a>, <a href="https://github.com/mozilla-services/cloudops-deployment/tree/master/projects/fxa" target="_blank" rel="noopener noreferrer"><code>cloudops-deployment</code></a>, and <a href="https://github.com/mozilla-services/cloudops-infra/tree/master/projects/fxa" target="_blank" rel="noopener noreferrer"><code>cloudops-infra</code></a> repos. While not crucial, access to fxa-private enables you to see a Bugzilla URL outputted by the release script, and access to <code>cloudops-deployment</code> and <code>cloudops-infra</code> allows you to see PRs that may be listed in the deploy doc as well as make PRs in that repo when you make code changes that necessitate them.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="releasing-code">Releasing Code<a href="#releasing-code" class="hash-link" aria-label="Direct link to Releasing Code" title="Direct link to Releasing Code">​</a></h2><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p><strong>The release script expects the git origin to be unchanged from the default.</strong>  If you&#x27;ve modified your git remotes you will get confusing output here and might mess things up.  If in doubt, check out a new copy of FxA (eg. <code>git clone git@github.com:mozilla/fxa.git fxa.tagging</code> and do all your tagging there.</p><p><strong>If you&#x27;re tagging in a newly cloned repo, ensure your commits will be GPG signed.</strong> Run <code>git config --list</code> and verify you see <code>commit.gpgsign=true</code>. If this is not already set globally, run <code>git config --global commit.gpgsign true</code>. <a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account" target="_blank" rel="noopener noreferrer">See docs</a> on how to add a GPG key.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-regular-release">A regular release<a href="#a-regular-release" class="hash-link" aria-label="Direct link to A regular release" title="Direct link to A regular release">​</a></h3><ol><li><p>The pre-flight checklist:</p><ol><li>Ensure there are no critical patches for this tag that haven&#x27;t landed yet</li><li>Ensure any previous point releases have been merged back into <code>main</code></li><li>Ensure you don&#x27;t have any modified files or code laying around before you start the tag</li><li>Ensure you have the latest from <code>main</code>, including tags. If <code>git fetch [remote]</code> doesn&#x27;t reflect the latest tag, run <code>git fetch [remote] --tags</code>.</li></ol></li><li><p>Run <a href="https://github.com/mozilla/fxa/blob/main/release.sh" target="_blank" rel="noopener noreferrer">release.sh</a> from the root of the repository on <code>main</code> with <code>./release.sh</code>. This will create an appropriately named train branch based on existing tags and branches, update a few files like the changelogs and <code>package.json</code> versions, and create a tag locally. Make sure there are no errors in the output.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>See a diagram of the happy path for a regular release, including what <code>release.sh</code> does</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="/ecosystem-platform/assets/images/fxa-release1-ccca6cee170e393a55428a6ed229e60f.png" class="img_ev3q"><p>An example of what your commands may look like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git checkout main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./release.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># check `git log`, `git diff`, then follow instructions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details></li><li><p>Do some manual checks in the new train branch to make sure the generated tags are sane:</p><ol><li>Does <code>git log</code> look as expected, showing all commits between the previous tag, and the new tag?</li><li>When running a <code>git diff</code> from <code>origin/main</code>, does the diff look correct, including:<ul><li>Do the changelogs look as expected with a version bump and commit message summaries?</li><li>Have all the version strings in <code>package.json</code> been updated?</li><li>Do the files changed look as expected for the major release?</li></ul></li></ol></li><li><p>The release script will print some commands to run to push the train branch and the tag to the repo. You might consider doing all other commands in a new terminal tab to not lose the print out. <strong>It&#x27;s best to copy and paste the push commands so you don&#x27;t mix them up.</strong> The deploy to staging will begin once <code>deploy_and_tag</code> finishes in CI which runs after all tests have passed.</p></li><li><p>The release script will also print a URL which you can use to open a PR to merge the train branch back into the main branch.</p></li><li><p>The release script will print out a bug template.  Copy that template and open a deployment bug in bugzilla under <code>Cloud Services :: Operations: Deployment Requests</code> (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1575233" target="_blank" rel="noopener noreferrer">example</a>) even if the component says it&#x27;s deprecated. Remember to include:</p><ol><li>Any notes that were added during the sprint from the <a href="https://docs.google.com/document/d/1lc5T1ZvQZlhXY6j1l_VMeQT9rs1mN7yYIcHbRPR2IbQ/edit" target="_blank" rel="noopener noreferrer">deploy doc</a> for the train, particularly any server side changes that need to happen as part of this deployment.</li><li>Links to the <code>qa+</code> label on GitHub.</li><li>Links to the release tag on GitHub.</li><li>Links to pertinent changelogs.</li></ol></li><li><p>Finally, when your train PR into <code>main</code> is approved and the deploy to stage has finished, merge the PR. If CI fails and it appears to be a flaky test, rerun the test from failed. If it continues failing, let the team know. There may be a problem that warrants a dot release, or if the fix is non-trivial, we may need to roll back the release with SRE coordination.</p><ol><li>If CI passes but the deploy fails, ask SRE to look at the deploy logs and paste any errors they find. There could be more than one error, so be sure to check and include all fixes into any planned, subsequent dot release.</li><li>If a dot release is needed, it is possible to tag the dot release shortly (i.e. &gt;= 20 minutes) after the major release. Check with SRE before any further tagging to ensure they are available to provide support as needed.</li></ol></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sre-staff-will-take-it-from-there">SRE staff will take it from there...<a href="#sre-staff-will-take-it-from-there" class="hash-link" aria-label="Direct link to SRE staff will take it from there..." title="Direct link to SRE staff will take it from there...">​</a></h3><ol><li><p>Ensure that any configuration changes noted in the deployment bug land in <a href="https://github.com/mozilla-services/cloudops-deployment/tree/master/projects/fxa" target="_blank" rel="noopener noreferrer">cloudops-deployment</a>.</p></li><li><p>Run any outstanding database migrations. These are applied automatically for <code>dev</code> and <code>stage</code> but are reviewed manually for production since we may need to take care with the changes to avoid slow queries.  The migrations should be included in the <a href="https://docs.google.com/document/d/1lc5T1ZvQZlhXY6j1l_VMeQT9rs1mN7yYIcHbRPR2IbQ/edit" target="_blank" rel="noopener noreferrer">deployment doc</a>.</p></li><li><p>Build <code>fxa-auth</code>, <code>fxa-content</code>, <code>fxa-oauth</code>, <code>fxa-profile</code>, <code>fxa-verifier</code> in stage on Jenkins using git commit from cloudops-deployment PR and docker images referenced in deploy bug</p></li><li><p>If this is a push to production:</p><ol><li>Ensure we have the appropriate QA signoffs. If major issues are found, a new patch is made and engineering will need to create a patch release</li><li>Deploy fxa-* to production</li><li>Close the initial deployment bug. It may be commented on later if there are patch releases in production.</li></ol></li><li><p>Otherwise, if this is a staging tag, request QA on stage by posting in the bug.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="patch-releases">Patch releases<a href="#patch-releases" class="hash-link" aria-label="Direct link to Patch releases" title="Direct link to Patch releases">​</a></h3><p>Patch (dot) releases are used between official releases to release code into staging or production that can&#x27;t wait for the normal release cycle. What warrants a patch release may be evaluated on a case-by-case basis, but we may need one if:</p><ul><li>An <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" target="_blank" rel="noopener noreferrer">S1 bug</a> is found</li><li>We have legitimate (non-flaky, non-SRE related) test failures in staging or production</li><li>We need to land tasks to make a time-sensitive deliverable that didn&#x27;t quite make the release, like a new RP launch</li></ul><p>If QA&#x27;s signoff after testing a release on staging comes back yellow or red, we should check with engineering management for their recommended course of action, as we may need a dot release before pushing a release to production.</p><p>Whenever a dot release is planned, ping the team to let them know you&#x27;ll be tagging <code>train xxx.y</code>, with a list of issues to be included in the release. Other engineers may have fixes that wouldn&#x27;t warrant a dot release on their own, but would be nice to ride along if a patch release is being tagged anyway.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>While it&#x27;s oftentimes up to our own discretion, engineers should be <strong>selective of fixes and mindful of asking</strong> release owners to include their patches if the patch wouldn&#x27;t justify a point release on its own, as it introduces more overhead and risk of failures or additional issues with the release.</p><p>If you’re requesting the release owner include a patch, make sure you know where that train is in regards to production. If the train is already in production, the dot release will be pushed to production relatively soon after the tag is made, which you may or may not intend. See the <a href="#production-hotfixes">production hotfixes</a> section for more info.</p></div></div><p>There are a few different ways to handle a dot release. Git is a flexible tool however, don&#x27;t hesitate to get in touch with your team to talk through the best courses of action.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-recommended-way">The <strong>recommended way</strong><a href="#the-recommended-way" class="hash-link" aria-label="Direct link to the-recommended-way" title="Direct link to the-recommended-way">​</a></h4><ol><li>Ensure you have the latest from the train branch. Create an uplift branch from the train branch with the version number, like <code>train-100-uplift-1</code>, branched off of <code>train-100</code></li><li>On the uplift branch, run <code>git cherry-pick</code> for the needed commits that have landed in <code>main</code></li><li>Get a PR up to merge <code>train-100-uplift-1</code> into <code>train-100</code>. This allows:<ul><li>A teammate to review exactly what&#x27;s going into the release</li><li>Confirmation that CI will pass before tagging</li></ul></li><li>After approval and CI pass, merge the PR</li><li>Check back into the train branch and ensure you have the latest, including tags, especially if you did not perform the original release or previous dot release for this train. If <code>git fetch [remote]</code> doesn&#x27;t reflect the latest tag, run <code>git fetch [remote] --tags</code>.</li><li>Run <code>git log</code> to ensure you see the expected cherry-picked commit(s). The patch command assumes that the relevant commit has been merged into the train branch locally and bumps the the minor version on the last tag it finds in the tree from HEAD.</li><li>Tag with the patch release command <strong>on the train branch</strong>, <code>./release.sh patch</code></li><li>Reference everything at and under the instructions beginning with &quot;Do some manual checks&quot; for <a href="#a-regular-release">a regular release</a>. Keep in mind the diff will be against <code>origin/train-###</code>, and instead of creating a new Bugzilla deploy bug, you&#x27;ll copy the output and paste it in the existing bug.</li></ol><ul><li>Be sure to open a PR from the train branch back into <code>main</code> and merge it once approved</li><li>While we prefer one train branch PR into <code>main</code> per patch release for reviewing purposes, it&#x27;s okay for there to be multiple releases in this PR if a previous patch release wasn&#x27;t reviewed and merged back into <code>main</code> before tagging the new patch release</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>See a diagram of a patch release with the <code>uplift</code> approach, including what <code>./release.sh patch</code> does</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="/ecosystem-platform/assets/images/fxa-release5-66268472de4c57e89a3171c4daa222d9.png" class="img_ev3q"><p>In the scenario above, a regular release happened and <code>v1.100.0</code> was tagged and pushed to production.  Later, to fix a regression, a patch was landed <em>directly on the branch</em> rather than on <code>main</code>.  <code>release.sh patch</code> was run and <code>v1.100.1</code> was tagged.  Four more commits landed on the branch and <code>release.sh patch</code> tagged a <code>v1.100.2</code>.  In this scenario there were two patch releases in addition to the regular release at the end of the sprint.</p></div></div></details><p>An example of commands to run for this kind of patch release are:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout train-100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> branch -b train-100-uplift-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> cherry-pick </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">commit</span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># do these one at a time to ensure there&#x27;s no merge conflicts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> cherry-pick </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">commit</span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">repeat as needed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> log  </span><span class="token comment" style="color:#999988;font-style:italic"># Verify you picked what you wanted to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push origin train-100-uplift-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># On GitHub:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1) make a Pull Request for train-100-uplift-1 to merge into train-100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 2) Ask for review</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 3) Wait for CI to pass ✅</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 4) Merge the Pull Request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout train-100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./release.sh patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Follow the instructions printed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="alternate-way-1-the-yolo-way-without-an--uplift-branch">Alternate way 1, the YOLO way, without an <code>-uplift</code> branch<a href="#alternate-way-1-the-yolo-way-without-an--uplift-branch" class="hash-link" aria-label="Direct link to alternate-way-1-the-yolo-way-without-an--uplift-branch" title="Direct link to alternate-way-1-the-yolo-way-without-an--uplift-branch">​</a></h4><p>Alternatively, you don&#x27;t <em>have</em> to create an <code>-uplift</code> branch to do a patch release. If you feel exceptionally confident in the release, you can choose to directly <code>cherry-pick</code> commits onto the <code>train-###</code> branch and then tag.</p><p>The downside to this approach is that a teammate can&#x27;t review what you&#x27;ve cherry-picked, and if CI fails after you&#x27;ve tagged, you might have to <code>cherry-pick</code> in an additional missed fix and then tag the next minor release. You may also push the train branch with the cherry-pick but <em>prior to tagging</em> if you want to see CI run first.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="alternate-way-2-the-direct-pr-way">Alternate way 2, the direct PR way<a href="#alternate-way-2-the-direct-pr-way" class="hash-link" aria-label="Direct link to Alternate way 2, the direct PR way" title="Direct link to Alternate way 2, the direct PR way">​</a></h4><p>To remove the <code>cherry-pick</code> step, it can potentially be easier on the release owner to PR patches directly into the <code>train-###-uplift-#</code> branch or directly into the <code>train-###</code> branch. This can be done because the train branch is always merged back into <code>main</code>. </p><p>If this is preferred, the release owner should communicate with the team about it, and create the <code>-uplift</code> branch and push it ahead of time if they prefer the <code>-uplift</code> branch strategy.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>See a diagram of a patch release approach with a direct PR into <code>train-###</code>, including what <code>release.sh patch</code> does</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="/ecosystem-platform/assets/images/fxa-release4-e1bfc4b0697908160e76be27aa1fdc31.png" class="img_ev3q"><p>In the scenario above, a regular release happened and <code>v1.100.0</code> was tagged and pushed to production.  Later, to fix a regression, a patch was landed <em>directly on the branch</em> rather than on <code>main</code>.  <code>release.sh patch</code> was run and <code>v1.100.1</code> was tagged.  Four more commits landed on the branch and <code>release.sh patch</code> tagged a <code>v1.100.2</code>.  In this scenario there were two patch releases in addition to the regular release at the end of the sprint.</p></div></div></details><p>An example of commands to run for this kind of patch release are:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout train-100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Ensure the pull requests on GitHub have landed before you continue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> log  </span><span class="token comment" style="color:#999988;font-style:italic"># Verify it looks like you expect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./release.sh patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Follow the instructions printed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-cases">Special Cases<a href="#special-cases" class="hash-link" aria-label="Direct link to Special Cases" title="Direct link to Special Cases">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="production-hotfixes">Production hotfixes<a href="#production-hotfixes" class="hash-link" aria-label="Direct link to Production hotfixes" title="Direct link to Production hotfixes">​</a></h3><p>Occasionally, an issue that warrants a dot release may be found in production. Handling this on the correct train(s) depends on when the bug is discovered and fixed.</p><p>Let&#x27;s say a major issue is caught in production, and train 100 was tagged the 1st of the month. Train 100 will hang out in staging for one week, and then be pushed to production on the 8th after appropriate signoffs. Release 101 is planning on being tagged on the 15th and pushed to production on the 22nd.</p><p>If the issue is caught and fixed between the 8th and the 15th, the hotfix can be landed on a patch release:</p><ol><li>Follow the patch release instructions using the <code>train-100</code> branch</li><li>Verify the fix on staging or ask QA to verify it for us, if possible</li><li>Communicate with SRE to ensure the patch release is pushed from staging to production</li></ol><p>If the issue is caught and fixed after train 101 is tagged, between the 15th and the 21st, the release owner must tag the fix on both train 100 and train 101. The release owner should:</p><ol><li>Follow the instructions above to tag on <code>train-100</code> and get the fix to production</li><li>Follow the patch release instructions using the <code>train-101</code> branch to ensure the patch is on staging with the new train</li></ol><p>It&#x27;s good to communicate frequently in #fxa-team when this occurs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="releasing-icons">Releasing Icons<a href="#releasing-icons" class="hash-link" aria-label="Direct link to Releasing Icons" title="Direct link to Releasing Icons">​</a></h3><p>All product icons live in a dedicated <a href="https://github.com/mozilla/fxa/tree/main/assets" target="_blank" rel="noopener noreferrer">assets directory</a> in the fxa repo. This directory is independent of individual packages in the monorepo because it doesn&#x27;t need to be wrapped up in any particular container, and these icons may be used across different servers.</p><p>The <code>assets</code> directory is uploaded manually to the FxA CDN at <a href="https://accounts-static.cdn.mozilla.net" target="_blank" rel="noopener noreferrer">https://accounts-static.cdn.mozilla.net</a> as part of the release process. Subdirectories map directly to paths under the CDN domain: content in <code>assets/foo</code> maps to <a href="https://accounts-static.cdn.mozilla.net/foo" target="_blank" rel="noopener noreferrer">https://accounts-static.cdn.mozilla.net/foo</a>.</p><p>The Stripe product icons live in <code>assets/product-icons</code>.</p><p>It&#x27;s fine to create other subdirectories for new collections of assets as needed but you&#x27;ll need to modify the push script to include them.</p><p>The release script for static assets is <code>.github/workflows/upload-assets-to-cdn.yml</code>. </p><p>Icons and other assets are normally deployed with every release. If icons need to be deployed outside the regular release process, ask operations for help.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="security-releases">Security Releases<a href="#security-releases" class="hash-link" aria-label="Direct link to Security Releases" title="Direct link to Security Releases">​</a></h3><p>We maintain <a href="https://github.com/mozilla/fxa-private" target="_blank" rel="noopener noreferrer"><code>fxa-private</code></a> for making security-related point releases, also known as a private patch release. This is something we rarely have to do.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>See a diagram of a security release</summary><div><div class="collapsibleContent_i85q"><img loading="lazy" src="/ecosystem-platform/assets/images/fxa-release3-ca2a4f7e30fc26e811457d5e9e3acad4.png" class="img_ev3q"><p>This diagram illustates an important security patch being pushed live midway through sprint 100.</p></div></div></details><p>The recommended procedure for doing so is:</p><ol><li><p>Check out the private repo, independently from your normal working repo:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone git@github.com:mozilla/fxa-private</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> fxa-private</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Do not add fxa-private as a remote on your normal working repo. This increases the risk of pushing a private fix to the public repo by mistake.</p></div></div></li><li><p>Add the corresponding public repo as a remote named <code>public</code>, and ensure it&#x27;s up-to-date:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> remote </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> public git@github.com:mozilla/fxa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> fetch public </span><span class="token comment" style="color:#999988;font-style:italic"># Ensure this pulls latest tags. Run `git fetch public --tags` if not</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Check out the latest release branch and push it to the private repo:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout public/train-XYZ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push origin train-XYZ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Develop your fix against this as a new branch in the private repo:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout -b train-XYZ-my-security-fix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push -u origin train-XYZ-my-security-fix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Submit and review the fix as a PR in the private repo,
targetting the <code>train-XYZ</code> branch.</p></li><li><p>Tag a point release in the private repo, following the release steps</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout train-XYZ</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull  </span><span class="token comment" style="color:#999988;font-style:italic"># ensure we have the merged PR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grunt version:patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Push the tag in order to trigger a CircleCI build:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push origin v1.XYZ.N</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Do not use <code>git push --tags</code> as this will not correctly trigger the CircleCI build.</p></div></div></li><li><p>File an issue on the public repo as a reminder to uplift the fix
once it has been deployed to production.</p></li></ol><p>Once the fix has been deployed and is safe to reveal publicly, it can be merged back into the public repo by doing the following:</p><ol><li><p>Push the private train branch to the public repo,
as a new branch:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push public train-XYZ:train-XYZ-uplift</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Open a PR in the public repo, targeting the public <code>train-XYZ</code> branch, for review and merge.</p></li><li><p>Push the tag to the public repo:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push public v1.XYZ.N </span><span class="token comment" style="color:#999988;font-style:italic"># Replace this with whatever tag is currently live</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Merge the <code>train-XYZ</code> branch to main following the usual steps to release</p></li></ol><p>Operations is involved at this point to deploy to production directly from <code>fxa-private</code> so the patch is never seen before it&#x27;s live.</p><p>Once the fix is verified in production, the patch is cherry-picked or merged back to <code>fxa</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="temporary-stage-deploys">Temporary stage deploys<a href="#temporary-stage-deploys" class="hash-link" aria-label="Direct link to Temporary stage deploys" title="Direct link to Temporary stage deploys">​</a></h3><p>If you are working on something that you wish to test out in a release environment before it is officially merged into <code>main</code> you might consider a temporary deploy to stage.</p><p>To do so, start by branching off the most recent train branch. Don&#x27;t branch off <code>main</code> so you&#x27;re not introducing changes merged after the official train was deployed. Cherry-pick your change(s) into the new branch.</p><p>Tag the branch with a name of your choosing, and push your branch to <code>mozilla/fxa</code>. Because you&#x27;re pushing a tag, it will trigger a build workflow in CircleCI. Keep an eye on the <code>deploy-packages</code> job.</p><p>Once the images have been built, you can ping someone from SRE in Slack to selectively deploy servers your changes occurred in (e.g. if you only change code in <code>fxa-auth-server</code>, only the auth server needs to be deployed).</p><p>Some things to keep in mind:</p><ul><li>This is a temporary deploy. Your changes will be reverted when the next official stage train tag occurs for a regular release or a patch release, or if someone else needs to perform this process.</li><li>We have relying parties that depend on stage for their own testing, so try not to break things with your temporary code. If you think this is a possibility please consider pinging QA in Slack so they can perform tests as needed.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-actually-happens-with-the-deploy-process">What actually happens with the deploy process?<a href="#what-actually-happens-with-the-deploy-process" class="hash-link" aria-label="Direct link to What actually happens with the deploy process?" title="Direct link to What actually happens with the deploy process?">​</a></h3><ol><li>A tag named <code>v1.xxx.y</code> is made with the release script</li><li>When the tag is pushed to <code>mozilla/fxa</code>, CircleCI runs the normal unit/integration tests on that tag</li><li>After tests pass, <code>deploy_and_tag</code> is ran, where CircleCI builds Docker images and uploads them to Docker Hub</li><li>Docker Hub sends a webhook to Jenkins and runs the our deploy pipelines with the new Docker image</li><li>Our servers are deployed and our Slackbot pings the #fxa-team channel. These go out one-after-another but they have a little overlap.<ul><li>Stage is deployed in alphabetical order</li><li>Production is deployed with:<ul><li>auth-server first because it breaks the most</li><li>Anything that touches the database</li><li>Then content-server and others last</li></ul></li></ul></li><li>The test-content-server-remote smoke tests are ran, triggered by the content-server deployment finishing</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="canary">Canary<a href="#canary" class="hash-link" aria-label="Direct link to Canary" title="Direct link to Canary">​</a></h4><p>In staging, we have a canary available but there is only one server, meaning the canary will take 100% of traffic.  </p><p>In production, the canary also takes the full amount of traffic, however, the percentage of traffic it gets is based on how many servers are running. For example, if the auth-server is deployed with 30 servers, the canary would take 1/30th of the traffic.</p><p>Work with SRE if you need a canary deployment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="does-a-deploy-failure-on-one-server-prevent-others-from-deploying">Does a deploy failure on one server prevent others from deploying?<a href="#does-a-deploy-failure-on-one-server-prevent-others-from-deploying" class="hash-link" aria-label="Direct link to Does a deploy failure on one server prevent others from deploying?" title="Direct link to Does a deploy failure on one server prevent others from deploying?">​</a></h3><p>In staging, a single service will not stop the rest from deploying. In production, they are deployed by hand, so if one breaks SRE will stop the rest from deploying.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-if-i-run-the-release-script-and-something-went-wrong">What if I run the release script and something went wrong?<a href="#what-if-i-run-the-release-script-and-something-went-wrong" class="hash-link" aria-label="Direct link to What if I run the release script and something went wrong?" title="Direct link to What if I run the release script and something went wrong?">​</a></h3><p>If you run the release script and something goes awry or the diff looks off, don&#x27;t worry - everything the release script does is done locally until you manually push the train branch and tag.</p><p>If you haven&#x27;t pushed the tag yet, you will need to delete the tag locally and discard the tag commit before rerunning the script. You can do this with <code>git tag -d &lt;tag name&gt;</code> and <code>git reset HEAD~1</code> while on the train branch to remove the tag commit. When you&#x27;ve verified the commit is no longer present with <code>git log</code> and that the tag has also been deleted locally, you can rerun the script.</p><p>If you&#x27;ve already pushed the tag and noticed a problem, you will need to rerun the script. Once the tag is pushed, the Docker image is pushed to Docker Hub with a reference to that tag. If you <em>need</em> to retag with an existing tag, you will need to coordinate with SRE.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-if-the-merge-messes-up-the-changelog">What if the merge messes up the changelog?<a href="#what-if-the-merge-messes-up-the-changelog" class="hash-link" aria-label="Direct link to What if the merge messes up the changelog?" title="Direct link to What if the merge messes up the changelog?">​</a></h3><p>After merging but before pushing, you should check the changelog to make sure that the expected versions are listed and they&#x27;re in the right order. If any are missing or the order is wrong, manually edit the changelog so that it makes sense, using the commit summaries from <code>git log --graph --oneline</code> to fill in any blanks as necessary.</p><p>Then <code>git add</code> those changes and squash them into the preceding merge commit using <code>git commit --amend</code>. Now you can push and the merged changelog will make sense.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-happens-if-there-are-merge-conflicts-train-xxx--main">What happens if there are merge conflicts (train-xxx =&gt; main)?<a href="#what-happens-if-there-are-merge-conflicts-train-xxx--main" class="hash-link" aria-label="Direct link to What happens if there are merge conflicts (train-xxx =&gt; main)?" title="Direct link to What happens if there are merge conflicts (train-xxx =&gt; main)?">​</a></h3><p>Conflicts are most likely from a recently landed issue in <code>main</code>. Typically we create a new branch, resolve conflicts there, and then merge that branch into <code>main</code>.</p><p>Merge conflicts in a <code>train-xxx -&gt; main</code> pull request are most likely the result of a recent patch into <code>main</code> branch. The easiest way to resolve this is to:</p><ol><li>Create a new merge branch branch from <code>train-xxx</code>, such as <code>train-xxx-merge-main</code></li><li>Merge the current <code>origin/main</code> into <code>train-xxx-merge-main</code></li><li>Resolve the conflicts that occur in the merge</li><li>Commit changes and push to origin</li><li>Create a new PR, <code>train-xxx-merge-main -&gt; main</code></li><li>Wait for Circle tests to pass and then merge when ready</li></ol><p>You can then close the <code>train-xxx -&gt; main</code> PR.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mozilla/ecosystem-platform/edit/master/docs/reference/team-processes/release-process.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/ecosystem-platform/reference/team-processes/triage-process"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Triage Owner Duties</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ecosystem-platform/reference/team-processes/pull-request-review-guidelines"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pull Request review guidelines</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-a-release-owner" class="table-of-contents__link toc-highlight">What is a Release Owner?</a></li><li><a href="#i-am-the-release-owner-how-should-i-plan-my-sprint" class="table-of-contents__link toc-highlight">I am the Release Owner: How should I plan my Sprint?</a></li><li><a href="#releasing-code" class="table-of-contents__link toc-highlight">Releasing Code</a><ul><li><a href="#a-regular-release" class="table-of-contents__link toc-highlight">A regular release</a></li><li><a href="#sre-staff-will-take-it-from-there" class="table-of-contents__link toc-highlight">SRE staff will take it from there...</a></li><li><a href="#patch-releases" class="table-of-contents__link toc-highlight">Patch releases</a></li></ul></li><li><a href="#special-cases" class="table-of-contents__link toc-highlight">Special Cases</a><ul><li><a href="#production-hotfixes" class="table-of-contents__link toc-highlight">Production hotfixes</a></li><li><a href="#releasing-icons" class="table-of-contents__link toc-highlight">Releasing Icons</a></li><li><a href="#security-releases" class="table-of-contents__link toc-highlight">Security Releases</a></li><li><a href="#temporary-stage-deploys" class="table-of-contents__link toc-highlight">Temporary stage deploys</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#what-actually-happens-with-the-deploy-process" class="table-of-contents__link toc-highlight">What actually happens with the deploy process?</a></li><li><a href="#does-a-deploy-failure-on-one-server-prevent-others-from-deploying" class="table-of-contents__link toc-highlight">Does a deploy failure on one server prevent others from deploying?</a></li><li><a href="#what-if-i-run-the-release-script-and-something-went-wrong" class="table-of-contents__link toc-highlight">What if I run the release script and something went wrong?</a></li><li><a href="#what-if-the-merge-messes-up-the-changelog" class="table-of-contents__link toc-highlight">What if the merge messes up the changelog?</a></li><li><a href="#what-happens-if-there-are-merge-conflicts-train-xxx--main" class="table-of-contents__link toc-highlight">What happens if there are merge conflicts (train-xxx =&gt; main)?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Mozilla Corporation.</div></div></div></footer></div>
<script src="/ecosystem-platform/assets/js/runtime~main.bdf135bd.js"></script>
<script src="/ecosystem-platform/assets/js/main.db86fd1f.js"></script>
</body>
</html>